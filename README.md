# Judaism Online

This project provides a simple web application for free blog posts, courses and informational pages about Judaism.
It uses the local Llama 3 model (via [Ollama](https://github.com/ollama/ollama)) to automatically generate content.

## Features

- Daily blog posts generated by AI (two posts per run of `daily_post.py`).
- Admin interface to create new blog posts and courses on demand and edit page content.
- Admin settings allow you to change the site's main topic and news source URL.
- Courses include difficulty levels and prerequisites.
- Automatically generated course overviews use Introduction, Main Content and
  Learning Expectations sections.
- Printable certificate page after completing a course.
- Certificates can also be emailed as PDFs.
- Full course pages display all sections together using a modern accordion layout.
- News section populated from a configurable API (`update_news.py`).
  The admin page lets you set the feed URL and shows when the news was last fetched.
- Optional `update_site.py` script can generate posts, update the news section
  and freeze the site. It no longer deploys automatically so the site is only
  updated when you trigger a deployment.
- `batch_courses.py` can generate multiple courses in one run.
- Login and admin pages are only available when the environment variable
  `SHOW_LOGIN=1` is set while running the Flask app. They are excluded from the
  static site, so visitors won't see the login button.

## Setup

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
2. Ensure an Ollama instance is running locally with the `llama3:8b` model.
3. Run the web app:
   ```bash
   python app.py
   ```
4. (Optional) Generate two daily blog posts from the command line:
   ```bash
   python daily_post.py
   ```
5. (Optional) Fetch the latest news items:
   ```bash
   python update_news.py
   ```
6. (Optional) Automatically create posts, freeze the site and push updates:
   ```bash
   python update_site.py
   ```
7. (Optional) Generate several courses at once:
   ```bash
   python batch_courses.py "Jewish history" --courses 3 --modules 5
   ```

The application uses a SQLite database (`site.db`) created automatically on first run.

No user registration is required. After finishing a course and passing the quiz,
visitors can enter their name and email on the certificate page. A PDF certificate
will be generated and emailed automatically.

To send PDF certificates via email, provide SMTP details using the `SMTP_SERVER`,
`SMTP_PORT`, `SMTP_USER` and `SMTP_PASSWORD` environment variables. The sender
address can be configured from the admin page or via the `ADMIN_EMAIL`
environment variable.

Placeholder images used by the templates can be replaced in `static/`:

- `hero.jpg`
- `about.jpg`
- `contact.jpg`
- `faq.jpg`
- `news.jpg`

These can also be uploaded or replaced from the admin "Images" section
without editing the repository manually.

Set the admin password using the `ADMIN_PASSWORD` environment variable (defaults to `admin`).


## Deployment to HostGator

If you host your site on HostGator, the repository includes a helper script
`deploy_hostgator.py` that uploads the frozen site via FTP. You can store the
FTP credentials from the admin page or set these environment variables:

- `HOSTGATOR_HOST` – the FTP server hostname (e.g. `ftp.example.com`).
- `HOSTGATOR_USERNAME` – your FTP username.
- `HOSTGATOR_PASSWORD` – your FTP password.
- `HOSTGATOR_REMOTE_PATH` – destination directory (defaults to `/public_html`).

With the credentials in place you can trigger the deployment from the admin
interface or run:

```bash
python deploy_hostgator.py
```

The script runs `update_site.py` to generate the latest content and then uploads
the files in `docs/` to your HostGator account.

You can also remove the remote directory using `delete_hostgator.py` or the
**Delete** button in the admin interface.
