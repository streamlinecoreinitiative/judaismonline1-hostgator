# Judaism Online

This project provides a simple web application for free blog posts, courses and informational pages about Judaism.
It uses the local Llama 3 model (via [Ollama](https://github.com/ollama/ollama)) to automatically generate content.

## Features

- Daily blog posts generated by AI (two posts per run of `daily_post.py`).
- Admin interface to create new blog posts and courses on demand and edit page content.
- Admin settings allow you to change the site's main topic and news source URL.
- Courses include difficulty levels and prerequisites.
- Automatically generated course overviews use Introduction, Main Content and
  Learning Expectations sections.
- Printable certificate page after completing a course.
- Certificates can also be emailed as PDFs.
- Full course pages display all sections together using a modern accordion layout.
- News section populated from a configurable API (`update_news.py`).
  The admin page lets you set the feed URL and shows when the news was last fetched.
- Optional `update_site.py` script can generate posts, update the news section
  and freeze the site. It no longer pushes updates automatically so the site is
  only published when you manually push changes.
- `batch_courses.py` can generate multiple courses in one run.
- Login and admin pages are only available when the environment variable
  `SHOW_LOGIN=1` is set while running the Flask app. They are excluded from the
  static site, so visitors on GitHub Pages will never see the login button.

## Setup

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
2. Ensure an Ollama instance is running locally with the `llama3:8b` model.
3. Run the web app:
   ```bash
   python app.py
   ```
4. (Optional) Generate two daily blog posts from the command line:
   ```bash
   python daily_post.py
   ```
5. (Optional) Fetch the latest news items:
   ```bash
   python update_news.py
   ```
6. (Optional) Automatically create posts, freeze the site and push updates:
   ```bash
   python update_site.py
   ```
7. (Optional) Generate several courses at once:
   ```bash
   python batch_courses.py "Jewish history" --courses 3 --modules 5
   ```

The application uses a SQLite database (`site.db`) created automatically on first run.

No user registration is required. After finishing a course and passing the quiz,
visitors can enter their name and email on the certificate page. A PDF certificate
will be generated and emailed automatically.

To send PDF certificates via email, provide SMTP details using the `SMTP_SERVER`,
`SMTP_PORT`, `SMTP_USER` and `SMTP_PASSWORD` environment variables. The sender
address can be configured from the admin page or via the `ADMIN_EMAIL`
environment variable.

Placeholder images used by the templates can be replaced in `static/`:

- `hero.jpg`
- `about.jpg`
- `contact.jpg`
- `faq.jpg`
- `news.jpg`

These can also be uploaded or replaced from the admin "Images" section
without editing the repository manually.

Set the admin password using the `ADMIN_PASSWORD` environment variable (defaults to `admin`).

## Deployment to GitHub Pages

You can generate a static version of the site using Frozen-Flask:

```bash
python freeze.py
```

The script initializes the database tables if needed and then writes the
generated HTML to the `docs/` directory.

A GitHub Actions workflow (`.github/workflows/gh-pages.yml`) automatically
freezes the site on every push to `main` and publishes the contents of `docs/`
to the `gh-pages` branch. Enable GitHub Pages for that branch in the repository
settings so the static site is available at `https://<username>.github.io/<repo>`.
The freezer now produces **relative URLs** so the site works correctly when
served from that sub-path. After generating or editing content locally, run
`python freeze.py` and push the updated `docs/` directory to trigger the
deployment workflow.

`update_site.py` provides a simple way to generate posts, fetch news and freeze
the site in one command. It leaves the updated files in your repository so you
can review them and push when ready using the admin "Push to GitHub" button (or
your own `git` commands).

If the button fails or you prefer the command line, run:

```bash
python freeze.py
git add docs
git commit -m "Update site"
git push
```

Other static hosting platforms such as Netlify or Vercel can be used if you
prefer. Any service capable of serving the generated `docs/` directory will
work.

## Deployment to HostGator

If you host your site on HostGator, the repository includes a helper script
`deploy_hostgator.py` that uploads the frozen site via FTP. Before running the
script or using the **Deploy to HostGator** button on the admin page, set these
environment variables:

- `HOSTGATOR_HOST` – the FTP server hostname (e.g. `ftp.example.com`).
- `HOSTGATOR_USERNAME` – your FTP username.
- `HOSTGATOR_PASSWORD` – your FTP password.
- `HOSTGATOR_REMOTE_PATH` – destination directory (defaults to `/public_html`).

With the variables in place you can trigger the deployment from the admin
interface or run:

```bash
python deploy_hostgator.py
```

The script runs `update_site.py` to generate the latest content and then uploads
the files in `docs/` to your HostGator account.
